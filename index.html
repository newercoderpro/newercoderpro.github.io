<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Inside</title>
  <style>
    html, body {
      margin: 0;
      height: 100%;
      font-family: Arial, sans-serif;
    }

    #toolbar {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px;
      background: #f1f3f4;
      border-bottom: 1px solid #ccc;
      position: fixed;
      width: 100%;
      top: 0;
      left: 0;
      z-index: 10;
    }

    #toolbar button {
      font-size: 16px;
      padding: 6px 10px;
      cursor: pointer;
    }

    #address {
      flex: 1;
      padding: 8px 12px;
      border-radius: 16px;
      border: 1px solid #ccc;
      font-size: 14px;
    }

    #iframeContainer {
      position: absolute;
      top: 48px; /* height of toolbar */
      bottom: 0;
      left: 0;
      right: 0;
    }

    #contentFrame {
      width: 100%;
      height: 100%;
      border: none;
    }
  </style>
</head>
<body>

  <!-- Toolbar -->
  <div id="toolbar">
    <button onclick="goBack()">‚¨Ö</button>
    <button onclick="refreshPage()">üîÑ</button>
    <button onclick="goHome()">üè†</button>
    <input id="address" value="pages/home.html" 
           onkeydown="if(event.key==='Enter'){goToURL()}"/>
    <button onclick="goToURL()">Go</button>
  </div>

  <!-- iframe -->
  <div id="iframeContainer">
    <iframe id="contentFrame" src="pages/home.html"></iframe>
  </div>

<script>
  let historyStack = [];
  const homePage = "pages/home.html";
  let currentURL = homePage;

  // Map private URLs like lan://pw.*.fun to real files
  function mapURL(url) {
    if(url.startsWith("lan://pw.")) {
      const page = url.replace("lan://pw.", "").replace(".fun", "");
      return "pages/" + page + ".html";
    }
    return url; // external URL
  }

  function goToURL() {
    const raw = document.getElementById('address').value.trim();
    if(!raw) return;
    const mapped = mapURL(raw);
    historyStack.push(currentURL);
    currentURL = mapped;
    document.getElementById('contentFrame').src = mapped;
    document.getElementById('address').value = raw; // show original input
  }

  function goBack() {
    if(historyStack.length > 0) {
      const lastURL = historyStack.pop();
      currentURL = lastURL;
      document.getElementById('contentFrame').src = lastURL;
      document.getElementById('address').value = lastURL;
    }
  }

  function refreshPage() {
    document.getElementById('contentFrame').src = currentURL;
  }

  function goHome() {
    historyStack.push(currentURL);
    currentURL = homePage;
    document.getElementById('contentFrame').src = homePage;
    document.getElementById('address').value = "lan://pw.home.fun";
  }

 // Load home page on start
currentURL = homePage; // actual file
document.getElementById('contentFrame').src = homePage; // real file
document.getElementById('address').value = "lan://pw.home.fun"; // displayed in toolbar
</script>

</body>
</html>
